<html lang="en">

<head>
	<link rel="stylesheet" href="./style/template.css">
	<title>JSON Parser</title>
</head>

<body>
	<div id="container">
		<nav id="navigation">
			<div id="navigation-text">
				<p id="lecture-name">Objects, JSON and DOM Events</p>
				<p id="problem-name">04. JSON Parser</p>
			</div>
			<img id="logo-img" src="./images/SoftUniFoundation_Logo_OneLine_White@2x.png" alt="logo">
		</nav>
		<main>
			<div id="exercise">
				<form>
					<label>Input</label>
					<input type="text" id="input">
					<label>Command</label>
					<input type="text" id="command">
					<div class="center">
						<input type="submit" id="button" onclick="extractInfo()" value="Extract Info">
					</div>
				</form>
				<label>Result</label>
				<textarea readonly rows="10" cols="50" id="result"></textarea>
			</div>
			<img id="softUni-person-img" src="./images/cw_2_New_Logo.png" alt="softUni-person">
		</main>
		<footer>
			<p id="footer-text">Check your solution here: <span id="check-judge">Link to judge</span>
			</p>
		</footer>
	</div>
	<script>
		document.getElementById("button").addEventListener("click", function (event) {
			event.preventDefault()
		});
		function extractInfo() {

			let object = JSON.parse(document.getElementById('input').value);
			let resultTextArea = document.getElementById('result');
			let commandParams = document.getElementById('command').value.split(' ');

			let commandType = commandParams[0];
			let key = commandParams[commandParams.length - 1];

			if (commandType === 'typeof' || commandType === 'value') {

				if (object[key]) {

					if (commandType === 'typeof') {

						resultTextArea.value = `Type: ${typeof object[key]}`;

					} else {

						resultTextArea.value = `Value: ${object[key]}`;
					}

				} else {

					resultTextArea.value = 'No such item';
				}

			} else {

				resultTextArea.value = 'Invalid command';
			}
		}
	</script>
</body>

</html>